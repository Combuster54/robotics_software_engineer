<?xml version="1.0"?>
<robot name="ackerman_mobile">

    <link name="base_link">
        <visual>
            <geometry>
                <box size="0.75 0.4 0.1" />
            </geometry>
            <material name="gray">
                <color rgba="0.2 0.2 0.2 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <box size="0.75 0.4 0.1" />
            </geometry>
        </collision>
    </link>

    <link name="rb_wheel_link">
        <visual>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="2.0"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
        </inertial>
    </link>

    <link name="lb_wheel_link">
        <visual>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
            <contact_coefficient mu="1" kp="1e+13" kd="1.0"/>
        </collision>
        <inertial>
            <mass value="2.0"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
        </inertial>
    </link>

    <link name="rf_wheel_link">
        <visual>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="2.0"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
        </inertial>
    </link>

    <link name="lf_wheel_link">
        <visual>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="2.0"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
        </inertial>
    </link>

    <link name="camera_link">
        <visual>
            <geometry>
                <box size="0.1 0.1 0.05"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <box size="0.1 0.1 0.05"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.1"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
        </inertial>
    </link>

    <link name="lidar_link">
        <visual>
            <geometry>
                <cylinder radius="0.1" length="0.05"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.1" length="0.05"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.1"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
        </inertial>
    </link>

    <link name="wheel_right_aux_link">
        <visual>
            <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
            <geometry>
              <cylinder length="0.005"  radius="0.0045000000000000005"/>
            </geometry>
          </visual>
    
          <collision>
            <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
            <geometry>
              <cylinder length="0.005"  radius="0.0045000000000000005"/>
            </geometry>
          </collision>
    
          <inertial>
              <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
              <mass value="0.5"/>
              <inertia ixx="0.00011354166666666666" ixy="0.0" ixz="0.0" iyy="0.00011354166666666666" iyz="0.0" izz="0.000225" />
          </inertial>
    </link>

    
    <link name="wheel_left_aux_link">
        <visual>
            <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
            <geometry>
              <cylinder length="0.005"  radius="0.0045000000000000005"/>
            </geometry>
          </visual>
    
          <collision>
            <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
            <geometry>
              <cylinder length="0.005"  radius="0.0045000000000000005"/>
            </geometry>
          </collision>
    
          <inertial>
              <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
              <mass value="0.5"/>
              <inertia ixx="0.00011354166666666666" ixy="0.0" ixz="0.0" iyy="0.00011354166666666666" iyz="0.0" izz="0.000225" />
          </inertial>
    </link>
    

    <joint name="lf_wheel_aux" type="revolute">
        <origin xyz="0.2 0.25 0.0" rpy="0.0 0.0 0.0"/>
        <parent link="base_link"/>
        <child link="wheel_left_aux_link"/>
        <limit lower="-0.785398" upper="0.785398" effort="10" velocity="1"/>
        <axis xyz="0.0 0.0 -1.0"/>
    </joint>

    <joint name="lf_wheel_joint" type="continuous">
        <origin xyz="0 0  0.0" rpy="1.57 0.0 0.0"/>
        <parent link="wheel_left_aux_link"/>
        <child link="lf_wheel_link"/>
        <axis xyz="0.0 0.0 -1.0"/>
    </joint>
    
    <joint name="rf_wheel_aux" type="revolute">
        <origin xyz="0.2 -0.25 0.0" rpy="0 0.0 0.0"/>
        <parent link="base_link"/>
        <child link="wheel_right_aux_link"/>
        <limit lower="-0.785398" upper="0.785398" effort="10" velocity="1"/>
        <axis xyz="0.0 0.0 -1.0"/>
    </joint>

     <joint name="rf_wheel_joint" type="continuous">
        <origin xyz="0 0 0.0" rpy="1.57 0.0 0.0"/>
        <parent link="wheel_right_aux_link"/>
        <child link="rf_wheel_link"/>
        <axis xyz="0.0 0.0 -1.0"/>
    </joint>
    
    <joint name="lb_wheel_joint" type="continuous">
        <origin xyz="-0.2 0.25 0.0" rpy="1.57 0.0 0.0"/>
        <parent link="base_link"/>
        <child link="lb_wheel_link"/>
        <axis xyz="0.0 0.0 -1.0"/>
    </joint>
    
    <joint name="rb_wheel_joint" type="continuous">
        <origin xyz="-0.2 -0.25 0.0" rpy="1.57 0.0 0.0"/>
        <parent link="base_link"/>
        <child link="rb_wheel_link"/>
        <axis xyz="0.0 0.0 -1.0"/>
    </joint>
    
    <joint name="lidar_joint" type="fixed">
        <origin xyz="0.285 0 0.075" rpy="0.0 0.0 1.57"/>
        <parent link="base_link"/>
        <child link="lidar_link"/>
        <axis xyz="0.0 0.0 1.0"/>
    </joint>
    
    <joint name="camera_joint" type="fixed">
        <origin xyz="0.35 0 0.01" rpy="0 0 3.14"/>
        <parent link="base_link"/>
        <child link="camera_link"/>
        <axis xyz="0.0 0.0 1.0"/>
    </joint>

    <link name="steering_link"/>

    <joint name="steering_joint_test" type="revolute">
        <origin xyz="0.0 0 0.5" rpy="0 0 0"/>
        <parent link="base_link"/>
        <child link="steering_link"/>
        <axis xyz="0.0 0.0 1.0"/>
        <limit lower="-0.785398" upper="0.785398" effort="10" velocity="1"/>

    </joint>

    <!-- <gazebo>    

        <plugin name="gazebo_ros_ackermann_drive" filename="libgazebo_ros_ackermann_drive.so">

            <ros>
                <remapping>cmd_vel:=cmd_vel</remapping>
                <remapping>odom:=odom</remapping>
                <remapping>distance:=distance</remapping>
            </ros>
        
            <update_rate>100.0</update_rate>
        
            <front_left_joint>lf_wheel_joint</front_left_joint>
            <front_right_joint>rf_wheel_joint</front_right_joint>

            <rear_left_joint>lb_wheel_joint</rear_left_joint>
            <rear_right_joint>rb_wheel_joint</rear_right_joint>

            <left_steering_joint>lf_wheel_aux</left_steering_joint>
            <right_steering_joint>rf_wheel_aux</right_steering_joint>
        
            <max_steer>0.6458</max_steer>
        
            <max_steering_angle>7.85</max_steering_angle>
        
            <max_speed>5.0</max_speed>
        
            <left_steering_pid_gain>1500 0 1</left_steering_pid_gain>
            <left_steering_i_range>0 0</left_steering_i_range>
            <right_steering_pid_gain>1500 0 1</right_steering_pid_gain>
            <right_steering_i_range>0 0</right_steering_i_range>
            <linear_velocity_pid_gain>1000 0 1</linear_velocity_pid_gain>
            <linear_velocity_i_range>0 0</linear_velocity_i_range>
        
            <publish_odom>true</publish_odom>
            <publish_odom_tf>true</publish_odom_tf>
            <publish_wheel_tf>true</publish_wheel_tf>
            <publish_distance>true</publish_distance>
        
            <odometry_frame>odom</odometry_frame>
            <robot_base_frame>base_link</robot_base_frame>
        
        </plugin>
    </gazebo>     -->

</robot>