<?xml version="1.0"?>
<robot name="robot">
    <link name="base_link">
        <visual>
            <geometry>
                <box size="0.75 0.4 0.1" />
            </geometry>
            <material name="gray">
                <color rgba="0.2 0.2 0.2 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <box size="0.75 0.4 0.1" />
            </geometry>
        </collision>
    </link>

    <link name="wheel_right_link">
        <visual>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="2.0"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
        </inertial>
    </link>

    <link name="wheel_left_link">
        <visual>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
            <contact_coefficient mu="1" kp="1e+13" kd="1.0"/>
        </collision>
        <inertial>
            <mass value="2.0"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
        </inertial>
    </link>

    <link name="caster_wheel">
        <visual>
            <geometry>
                <sphere radius="0.08"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <sphere radius="0.08"/>
            </geometry>
            <contact_coefficient mu="1" kp="1e+13" kd="1.0"/>
        </collision>
        <inertial>
            <mass value="2.0"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
        </inertial>
    </link>

    <link name="camera_link">
        <visual>
            <geometry>
                <box size="0.1 0.1 0.05"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <box size="0.1 0.1 0.05"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.1"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
        </inertial>
    </link>

    <link name="lidar_link">
        <visual>
            <geometry>
                <cylinder radius="0.1" length="0.05"/>
            </geometry>
            <material name="white">
                <color rgba="1 1 1 1"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.1" length="0.05"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="0.1"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
        </inertial>
    </link>

    <joint name="wheel_left_joint" type="continuous">
        <origin xyz="-0.2 0.25 0.0" rpy="1.57 0.0 0.0"/>
        <parent link="base_link"/>
        <child link="wheel_left_link"/>
        <axis xyz="0.0 0.0 -1.0"/>
    </joint>
    
    <joint name="wheel_right_joint" type="continuous">
        <origin xyz="-0.2 -0.25 0.0" rpy="1.57 0.0 0.0"/>
        <parent link="base_link"/>
        <child link="wheel_right_link"/>
        <axis xyz="0.0 0.0 -1.0"/>
    </joint>
    
    <joint name="caster_joint" type="continuous">
        <origin xyz="0.3 0.0 -0.07" rpy="0.0 0.0 0.0"/>
        <parent link="base_link"/>
        <child link="caster_wheel"/>
        <axis xyz="0 0 1"/>
    </joint>
    
    <joint name="lidar_joint" type="fixed">
        <origin xyz="0.285 0 0.075" rpy="0.0 0.0 1.57"/>
        <parent link="base_link"/>
        <child link="lidar_link"/>
        <axis xyz="0.0 0.0 1.0"/>
    </joint>
    
    <joint name="camera_joint" type="fixed">
        <origin xyz="0.35 0 0.01" rpy="0 0 3.14"/>
        <parent link="base_link"/>
        <child link="camera_link"/>
        <axis xyz="0.0 0.0 1.0"/>
    </joint>

    <joint name="mobile_arm_joint" type="fixed">
        <origin xyz="0 0 0.1" rpy="0 0 3.14"/>
        <parent link="base_link"/>
        <child link="arm_base_link"/>
        <axis xyz="0.0 0.0 1.0"/>
    </joint>
    
    <!-- Base Link -->
    <link name="arm_base_link">
        <visual>
            <geometry>
                <cylinder radius="0.1" length="0.1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.1" length="0.1"/>
            </geometry>     
        </collision>
        <inertial>
            <mass value="1.0"/>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <inertia ixx="0.0033" ixy="0.0" ixz="0.0" iyy="0.0033" iyz="0.0" izz="0.0050"/>
        </inertial>
    </link>
    
    <!-- First Link -->
    <link name="shoulder_link">
        <visual>
            <geometry>
                <cylinder radius="0.05" length="0.1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.05" length="0.1"/>
            </geometry> 
        </collision>
        <inertial>
            <mass value="1.0"/>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <inertia ixx="0.000458" ixy="0.0" ixz="0.0" iyy="0.000458" iyz="0.0" izz="0.00125"/>
        </inertial>
    </link>
    
    <!-- First Joint -->
    <joint name="base_to_shoulder_joint" type="revolute">
        <parent link="arm_base_link"/>
        <child link="shoulder_link"/>
        <origin xyz="0 0 0.10" rpy="0 0 0"/>
        <axis xyz="0 0 1"/>
        <limit lower="-3.14" upper="3.14" effort="10" velocity="1"/>
    </joint>
    
    <!-- Second Link -->
    <link name="upper_arm_link">
        <visual>
            <geometry>
                <cylinder radius="0.05" length="0.1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.05" length="0.1"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="1.0"/>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <inertia ixx="0.000458" ixy="0.0" ixz="0.0" iyy="0.000458" iyz="0.0" izz="0.00125"/>
        </inertial>
    </link>
    
    <!-- Second Joint -->
    <joint name="shoulder_to_upper_arm_joint" type="revolute">
        <parent link="shoulder_link"/>
        <child link="upper_arm_link"/>
        <origin xyz="0 0 0.10" rpy="1.57 0 0"/>
        <axis xyz="0 0 1"/>
        <limit lower="-1.57" upper="1.57" effort="10" velocity="1"/>
    </joint>
    
    <!-- Third Link -->
    <link name="forearm_link">
        <visual>
            <geometry>
                <cylinder radius="0.05" length="0.3"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.05" length="0.3"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="1.0"/>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <inertia ixx="0.00229" ixy="0.0" ixz="0.0" iyy="0.00229" iyz="0.0" izz="0.00125"/>
        </inertial>
    </link>
    
    <!-- Third Joint (Fixed) -->
    <joint name="upper_arm_to_forearm_joint" type="fixed">
        <parent link="upper_arm_link"/>
        <child link="forearm_link"/>
        <origin xyz="0 0.2 0" rpy="-1.57 0 0"/>
    </joint>
    
    <!-- Fourth Link -->
    <link name="wrist_link">
        <visual>
            <geometry>
                <cylinder radius="0.05" length="0.1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.05" length="0.1"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="1.0"/>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <inertia ixx="0.000458" ixy="0.0" ixz="0.0" iyy="0.000458" iyz="0.0" izz="0.00125"/>
        </inertial>
    </link>
    
    <!-- Fourth Joint -->
    <joint name="forearm_to_wrist_joint" type="revolute">
        <parent link="forearm_link"/>
        <child link="wrist_link"/>
        <origin xyz="0 0 0.2" rpy="1.57 0 0"/>
        <axis xyz="0 0 1"/>
        <limit lower="-1.57" upper="1.57" effort="10" velocity="1"/>
    </joint>
    
        <!-- End Effector -->
    <link name="end_effector_link">
        <visual>
            <geometry>
                <cylinder radius="0.05" length="0.2"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.05" length="0.2"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="1.0"/>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <inertia ixx="0.000916" ixy="0.0" ixz="0.0" iyy="0.000916" iyz="0.0" izz="0.0025"/>
        </inertial>
    </link>
     
        <!-- End Effector Joint (Fixed) -->
    <joint name="wrist_to_end_effector_joint" type="fixed">
            <parent link="wrist_link"/>
            <child link="end_effector_link"/>
            <origin xyz="0 0.15 0" rpy="1.57 0 0"/>
    </joint>

    <gazebo>
        <plugin filename="libgazebo_ros_diff_drive.so" name="gazebo_base_controller">
            <odometry_frame>odom</odometry_frame>
            <commandTopic>cmd_vel</commandTopic>
            <publish_odom>true</publish_odom>
            <publish_odom_tf>true</publish_odom_tf>
            <update_rate>15.0</update_rate>
            <left_joint>wheel_left_joint</left_joint>
            <right_joint>wheel_right_joint</right_joint>
            <wheel_separation>0.5</wheel_separation>
            <wheel_diameter>0.3</wheel_diameter>
            <max_wheel_acceleration>0.7</max_wheel_acceleration>
            <max_wheel_torque>8</max_wheel_torque>
            <robotBaseFrame>base</robotBaseFrame>
        </plugin>
    </gazebo>    

    
</robot>